<div class="max-w-6xl mx-auto px-4 py-8">
  <div class="mb-6">
    <%= link_to "← Back to Characters", characters_path, class: "text-blue-600 hover:text-blue-800 underline" %>
  </div>

  <h1 class="text-2xl font-bold mb-6 text-center">Edit Character</h1>

  <%= form_with(model: @character, local: true, html: { multipart: true }, class: "max-w-lg mx-auto bg-white p-8 rounded-lg shadow") do |form| %>
    <div class="grid gap-6">
      <div>
        <%= form.label :name, "Name", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.text_field :name, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
      </div>

      <div>
        <%= form.label :profile_picture, "Profile Picture", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <% if @character.profile_picture.attached? %>
          <div class="mb-2">
            <%= image_tag @character.profile_picture.variant(resize_to_limit: [100, 100]), class: "rounded" %>
          </div>
        <% end %>
        <%= form.file_field :profile_picture, class: "block w-full text-gray-700 border-2 border-gray-300 rounded py-2 px-3 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none" %>
      </div>

      <div>
        <%= form.label :character_class, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.select :character_class,
            options_for_select(Character::FANTASY_CLASSES, selected: @character.character_class),
            { prompt: "Choose a class" },
            { class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3", id: "character_class_select" } %>
      </div>

      <div>
        <%= form.label :subclass, class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.select :subclass,
            [],
            { prompt: "Choose a subclass" },
            { class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3", id: "subclass_select", disabled: true } %>
      </div>

      <div>
        <%= form.label :species, "Species", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.text_field :species, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
      </div>

      <div>
        <%= form.label :level, "Level", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.select :level, (1..20).to_a, {}, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
      </div>

      <div>
        <%= form.label :hitpoints, "Hitpoints", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.number_field :hitpoints, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3", min: 1 %>
      </div>

      <div>
        <%= form.label :speed, "Speed", class: "block text-sm font-medium text-gray-700 mb-1" %>
        <%= form.number_field :speed, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3", min: 1 %>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Stats</label>
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4">
          <div>
            <%= form.label :strength, "Strength", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :strength, (8..20).to_a, {}, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
          </div>
          <div>
            <%= form.label :dexterity, "Dexterity", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :dexterity, (8..20).to_a, {}, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
          </div>
          <div>
            <%= form.label :constitution, "Constitution", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :constitution, (8..20).to_a, {}, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
          </div>
          <div>
            <%= form.label :intelligence, "Intelligence", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :intelligence, (8..20).to_a, {}, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
          </div>
          <div>
            <%= form.label :wisdom, "Wisdom", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :wisdom, (8..20).to_a, {}, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
          </div>
          <div>
            <%= form.label :charisma, "Charisma", class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :charisma, (8..20).to_a, {}, class: "block w-full rounded border-2 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 focus:outline-none py-2 px-3" %>
          </div>
        </div>
      </div>

      <div>
        <%= form.submit "Update Character", class: "w-full py-2 px-4 rounded bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition" %>
      </div>
    </div>
  <% end %>
</div>
